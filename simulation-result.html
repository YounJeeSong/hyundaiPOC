<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI 시뮬레이션 결과 - 현대자동차 R&D</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        :root {
            --hyundai-blue: #002c5f;
            --white: #ffffff;
            --black: #000000;
            --hyundai-sand: #e4dcd3;
            --hyundai-light-sand: #f6f3f2;
            --grey-dark: #676767;
            --grey-light: #cccccc;
            --grey-disabled: #999999;
            --progressive-blue: #00aad2;
            --active-red: #e63312;
            --success-green: #28a745;
            --warning-yellow: #f9a825;
            --yellow-light: #fffbea;
            
            --font-text: 'Noto Sans KR', sans-serif;
            --weight-light: 300;
            --weight-regular: 400;
            --weight-medium: 500;
            --weight-bold: 700;
            
            --space-4: 4px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --space-40: 40px;
            
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            
            --shadow-sm: 0 2px 4px rgba(0, 44, 95, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 44, 95, 0.1);
            --shadow-lg: 0 8px 24px rgba(0, 44, 95, 0.15);
            
            --transition: 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-text);
            background: var(--hyundai-light-sand);
            color: var(--black);
        }
        
        /* ===== LAYOUT ===== */
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        /* Global Navigation - 시뮬레이션 스타일 통일 */
        .global-nav {
            width: 240px;
            background: #002c5f;
            color: #fff;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }
        
        .logo-area {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo-title {
            font-size: 20px;
            font-weight: 500;
        }
        
        .logo-subtitle {
            font-size: 14px;
            opacity: 0.7;
            margin-top: 4px;
        }
        
        .nav-menu {
            flex: 1;
            padding: 16px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s ease;
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-item.active {
            background: #00aad2;
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Top Bar */
        .top-bar {
            min-height: 70px;
            background: var(--white);
            border-bottom: 1px solid var(--hyundai-sand);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-16) var(--space-32);
            flex-wrap: wrap;
            gap: var(--space-16);
        }
        
        .top-bar-left {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }
        
        .breadcrumb {
            font-size: 14px;
            color: var(--grey-dark);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .breadcrumb-link {
            color: var(--progressive-blue);
            cursor: pointer;
            text-decoration: none;
        }
        
        .breadcrumb-link:hover {
            text-decoration: underline;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: var(--weight-medium);
            color: var(--hyundai-blue);
        }
        
        .top-bar-actions {
            display: flex;
            gap: var(--space-12);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-12) var(--space-24);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: var(--weight-medium);
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-text);
        }
        
        .btn-primary {
            background: var(--hyundai-blue);
            color: var(--white);
        }
        
        .btn-primary:hover {
            opacity: 0.9;
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--hyundai-blue);
            border: 1px solid var(--hyundai-sand);
        }
        
        .btn-secondary:hover {
            background: var(--hyundai-light-sand);
            border-color: var(--hyundai-blue);
        }
        
        .btn-success {
            background: var(--success-green);
            color: var(--white);
        }

        /* Stepper */
        .stepper {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-16) var(--space-32);
            background: var(--white);
            border-bottom: 1px solid var(--hyundai-sand);
        }

        .step {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            font-size: 14px;
            color: var(--grey-dark);
        }

        .step.completed {
            color: var(--success-green);
        }

        .step.active {
            color: var(--hyundai-blue);
            font-weight: var(--weight-medium);
        }

        .step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: var(--weight-medium);
            background: var(--grey-light);
            color: var(--white);
        }

        .step.completed .step-number {
            background: var(--success-green);
        }

        .step.active .step-number {
            background: var(--hyundai-blue);
        }

        .step-connector {
            width: 40px;
            height: 2px;
            background: var(--grey-light);
        }

        .step-connector.completed {
            background: var(--success-green);
        }
        
        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-32);
        }
        
        /* Result Overview */
        .result-overview {
            background: var(--white);
            border: 1px solid var(--hyundai-sand);
            border-radius: var(--radius-sm);
            padding: var(--space-24);
            margin-bottom: var(--space-24);
        }
        
        .overview-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-20);
            padding-bottom: var(--space-16);
            border-bottom: 2px solid var(--hyundai-sand);
        }
        
        .overview-title {
            font-size: 18px;
            font-weight: var(--weight-medium);
            color: var(--hyundai-blue);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4) var(--space-12);
            border-radius: var(--radius-lg);
            font-size: 12px;
            font-weight: var(--weight-medium);
        }
        
        .status-badge.success {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }
        
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--space-24);
        }
        
        .overview-card {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .overview-label {
            font-size: 12px;
            font-weight: var(--weight-medium);
            color: var(--grey-dark);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .overview-value {
            font-size: 20px;
            font-weight: var(--weight-bold);
            color: var(--hyundai-blue);
        }
        
        .overview-value.small {
            font-size: 16px;
        }
        
        /* Simulation Card */
        .simulation-card {
            background: var(--white);
            border: 1px solid var(--hyundai-sand);
            border-radius: var(--radius-sm);
            overflow: hidden;
            margin-bottom: var(--space-24);
        }
        
        .simulation-header {
            background: var(--hyundai-blue);
            color: var(--white);
            padding: var(--space-20) var(--space-24);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .simulation-title {
            font-size: 18px;
            font-weight: var(--weight-medium);
            display: flex;
            align-items: center;
            gap: var(--space-12);
        }
        
        .simulation-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: var(--space-4) var(--space-12);
            border-radius: var(--radius-lg);
            font-size: 12px;
        }
        
        .simulation-body {
            padding: var(--space-24);
        }
        
        /* Visualization Section */
        .visualization-section {
            margin-bottom: var(--space-24);
        }
        
        .visualization-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-24);
        }
        
        .visualization-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
        }
        
        .visualization-placeholder {
            width: 100%;
            aspect-ratio: 16/10;
            background: var(--hyundai-light-sand);
            border: 2px dashed var(--hyundai-sand);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--grey-dark);
            font-size: 14px;
            flex-direction: column;
            gap: var(--space-8);
        }

        .visualization-image {
            width: 100%;
            aspect-ratio: 16/10;
            background: var(--hyundai-light-sand);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }
        
        .visualization-caption {
            font-size: 13px;
            font-weight: var(--weight-medium);
            color: var(--grey-dark);
            text-align: center;
        }
        
        /* Case Input Summary */
        .case-summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-16);
            margin-bottom: var(--space-24);
        }
        
        .case-summary-card {
            background: var(--hyundai-light-sand);
            border-radius: var(--radius-sm);
            padding: var(--space-16);
            border-left: 4px solid var(--progressive-blue);
        }
        
        .case-summary-title {
            font-size: 14px;
            font-weight: var(--weight-medium);
            color: var(--hyundai-blue);
            margin-bottom: var(--space-12);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .case-summary-badge {
            background: var(--progressive-blue);
            color: var(--white);
            padding: 2px 8px;
            border-radius: var(--radius-lg);
            font-size: 11px;
        }

        .modified-badge {
            background: rgba(0, 170, 210, 0.15);
            color: var(--progressive-blue);
            padding: 2px 8px;
            border-radius: var(--radius-lg);
            font-size: 10px;
            margin-left: var(--space-8);
        }
        
        .case-card-name {
            font-size: 13px;
            font-weight: var(--weight-medium);
            color: var(--hyundai-blue);
            margin-bottom: var(--space-8);
            margin-top: var(--space-12);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--hyundai-sand);
        }

        .case-card-name:first-child {
            margin-top: 0;
        }

        .case-params-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: var(--space-8);
        }

        .case-param-item {
            background: var(--white);
            border: 1px solid var(--hyundai-sand);
            border-radius: var(--radius-sm);
            padding: var(--space-8);
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        .case-param-item.modified {
            border-color: var(--progressive-blue);
            background: rgba(0, 170, 210, 0.05);
        }

        .case-param-item .param-label {
            font-size: 11px;
            color: var(--grey-dark);
        }

        .case-param-item .param-value {
            font-size: 13px;
            font-weight: var(--weight-medium);
            color: var(--black);
        }

        .case-param-item.modified .param-value {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .case-param-item .old-value {
            color: var(--grey-disabled);
            text-decoration: line-through;
            font-size: 12px;
        }

        .case-param-item .arrow {
            color: var(--progressive-blue);
            font-size: 12px;
        }

        .case-param-item .new-value {
            color: var(--progressive-blue);
            font-weight: var(--weight-bold);
        }
        
        .case-change-list {
            display: flex;
            flex-direction: column;
        }
        
        .case-change-item {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            font-size: 13px;
            color: var(--grey-dark);
        }
        
        .case-change-item .param-name {
            color: var(--black);
            font-weight: var(--weight-medium);
        }
        
        .case-change-item .arrow {
            color: var(--progressive-blue);
        }
        
        .case-change-item .new-value {
            color: var(--progressive-blue);
            font-weight: var(--weight-bold);
        }
        
        /* KPI Table */
        .kpi-table-wrapper {
            overflow-x: auto;
            border-radius: var(--radius-sm);
            border: 1px solid var(--grey-light);
        }
        
        .kpi-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .kpi-table thead {
            background: var(--yellow-light);
        }
        
        .kpi-table th {
            padding: var(--space-12) var(--space-8);
            text-align: center;
            font-weight: var(--weight-bold);
            color: var(--black);
            border: 1px solid var(--grey-light);
            font-size: 12px;
            vertical-align: middle;
        }
        
        .kpi-table td {
            padding: var(--space-12) var(--space-8);
            border: 1px solid var(--grey-light);
            text-align: center;
            vertical-align: middle;
        }
        
        .kpi-table tbody tr:hover {
            background: var(--hyundai-light-sand);
        }
        
        .kpi-performance {
            background: var(--yellow-light);
            font-weight: var(--weight-bold);
            color: var(--black);
            text-align: center;
        }

        .kpi-category-cell {
            background: var(--hyundai-light-sand);
            font-weight: var(--weight-medium);
            color: var(--hyundai-blue);
            text-align: center;
            font-size: 12px;
        }
        
        .kpi-name {
            font-weight: var(--weight-medium);
            color: var(--black);
            text-align: left;
            padding-left: var(--space-16) !important;
        }
        
        .kpi-unit {
            color: var(--grey-dark);
            font-size: 12px;
        }
        
        .kpi-target {
            color: var(--hyundai-blue);
            font-weight: var(--weight-medium);
        }
        
        .kpi-base {
            color: var(--black);
        }
        
        .kpi-value {
            font-weight: var(--weight-bold);
        }
        
        .kpi-value.pass {
            color: var(--success-green);
            background: rgba(40, 167, 69, 0.08);
        }
        
        .kpi-value.fail {
            color: var(--active-red);
            background: rgba(230, 51, 18, 0.08);
        }
        
        .kpi-value.neutral {
            color: var(--black);
        }

        .kpi-comment {
            font-size: 11px;
            color: var(--grey-dark);
            font-style: italic;
        }
        
        .kpi-comment {
            font-size: 11px;
            color: var(--grey-dark);
            font-style: italic;
        }
        
        /* Action Footer */
        .action-footer {
            padding: var(--space-20) var(--space-32);
            background: var(--white);
            border-top: 1px solid var(--hyundai-sand);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-info {
            font-size: 14px;
            color: var(--grey-dark);
        }
        
        .footer-actions {
            display: flex;
            gap: var(--space-12);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .global-nav {
                width: 60px;
                padding: var(--space-12);
            }
            
            .logo-subtitle,
            .nav-item span {
                display: none;
            }
            
            .visualization-grid {
                grid-template-columns: 1fr;
            }
            
            .overview-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .case-summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Global Navigation -->
        <nav class="global-nav">
            <div class="logo-area">
                <div class="logo-title">R&D Parameter DB</div>
                <div class="logo-subtitle">현대자동차</div>
            </div>
                        <div class="nav-menu">
                <div class="nav-item" onclick="location.href='index.html'">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                        <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    데이터조회
                </div>
                <div class="nav-item" onclick="location.href='create-step1.html'">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    데이터 생성
                </div>
                <div class="nav-item" onclick="location.href='kpi-analysis.html'">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    해석
                </div>
                <div class="nav-item active" onclick="location.href='simulation-setup.html'">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
                    </svg>
                    시뮬레이션
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="top-bar-left">
                    <div class="breadcrumb">
                        <a class="breadcrumb-link" href="index.html">홈</a>
                        <span>›</span>
                        <a class="breadcrumb-link" href="simulation-setup.html">KPI 시뮬레이션</a>
                        <span>›</span>
                        <span>결과 조회</span>
                    </div>
                    <h1 class="page-title" id="pageTitle">KPI 시뮬레이션 결과</h1>
                </div>
                <div class="top-bar-actions">
                    <button class="btn btn-secondary" onclick="downloadReport()">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                        리포트 다운로드
                    </button>
                    <button class="btn btn-primary" onclick="exportExcel()">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                        </svg>
                        Excel 내보내기
                    </button>
                </div>
            </div>
            
            <!-- Stepper -->
            <div class="stepper">
                <div class="step completed">
                    <div class="step-number">✓</div>
                    <span>KPI 설정 & 시뮬레이션 실행</span>
                </div>
                <div class="step-connector completed"></div>
                <div class="step active">
                    <div class="step-number">2</div>
                    <span>결과 조회</span>
                </div>
            </div>
            
            <!-- Content Area -->
            <div class="content-area">
                
                <!-- 1. 실험 개요 -->
                <div class="result-overview">
                    <div class="overview-header">
                        <div class="overview-title">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                            </svg>
                            실험 개요
                        </div>
                        <div class="status-badge success">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            완료
                        </div>
                    </div>
                    <div class="overview-grid">
                        <div class="overview-card">
                            <div class="overview-label">Performance</div>
                            <div class="overview-value small" id="performanceName">Handling</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">KPI 항목 수</div>
                            <div class="overview-value" id="kpiCount">6개</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">Case 수</div>
                            <div class="overview-value" id="caseCount">3개</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">실행 일시</div>
                            <div class="overview-value small" id="execTime">-</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">실행 시간</div>
                            <div class="overview-value small">1분 23초</div>
                        </div>
                    </div>
                </div>

                <!-- 2. KPI 결과 요약 -->
                <div class="simulation-card">
                    <div class="simulation-header">
                        <div class="simulation-title">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                            </svg>
                            <span>KPI 결과 요약</span>
                        </div>
                        <div class="simulation-badge" id="simType">Simulation Type: Handling</div>
                    </div>
                    <div class="simulation-body" style="padding: var(--space-16);">
                        <div class="kpi-table-wrapper">
                            <table class="kpi-table">
                                <thead id="kpiTableHead"></thead>
                                <tbody id="kpiTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- 3. 비교 그래프 & 시각화 -->
                <div class="simulation-card">
                    <div class="simulation-header">
                        <div class="simulation-title">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                            </svg>
                            <span>비교 그래프 & 시각화</span>
                        </div>
                    </div>
                    <div class="simulation-body">
                        <div class="visualization-section" style="margin-bottom: 0;">
                            <div class="visualization-grid">
                                <div class="visualization-item">
                                    <div class="visualization-image" style="background: var(--white); border: 1px solid var(--hyundai-sand); border-radius: var(--radius-sm); aspect-ratio: 16/10; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                                        <img src="https://quickchart.io/chart?c={type:'line',data:{labels:['0','0.5','1.0','1.5','2.0','2.5','3.0'],datasets:[{label:'Base',data:[0,12,22,26,28,28,28],borderColor:'rgb(0,44,95)',backgroundColor:'rgba(0,44,95,0.1)',fill:false,tension:0.4},{label:'Case1',data:[0,11,20,24,27,27.5,28],borderColor:'rgb(0,170,210)',fill:false,tension:0.4},{label:'Case2',data:[0,11.5,21,25,27.5,28,28.1],borderColor:'rgb(40,167,69)',fill:false,tension:0.4},{label:'Case3',data:[0,12,21.5,25.5,28,28.2,28.2],borderColor:'rgb(230,51,18)',fill:false,tension:0.4}]},options:{plugins:{title:{display:true,text:'Steering Wheel Angle Response'}},scales:{x:{title:{display:true,text:'Time (s)'}},y:{title:{display:true,text:'Angle (deg)'}}}}}" alt="Steering Response Graph" style="width: 100%; height: 100%; object-fit: contain;">
                                    </div>
                                    <div class="visualization-caption">Steering Response Curve (Base vs Cases)</div>
                                </div>
                                <div class="visualization-item">
                                    <div class="visualization-image" style="background: var(--white); border: 1px solid var(--hyundai-sand); border-radius: var(--radius-sm); aspect-ratio: 16/10; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                                        <img src="https://quickchart.io/chart?c={type:'bar',data:{labels:['Steering Angle','Lat Accel Time','Roll Peak','Roll SS','Yaw Overshoot','Sideslip'],datasets:[{label:'Base',data:[28,0.266,1.8,1.5,28.15,0.65],backgroundColor:'rgba(0,44,95,0.7)'},{label:'Case1',data:[28,0.255,1.86,1.55,27.54,0.59],backgroundColor:'rgba(0,170,210,0.7)'},{label:'Case2',data:[28.1,0.26,1.85,1.55,29.1,0.61],backgroundColor:'rgba(40,167,69,0.7)'},{label:'Case3',data:[28.2,0.261,1.82,1.55,28.5,0.596],backgroundColor:'rgba(230,51,18,0.7)'}]},options:{plugins:{title:{display:true,text:'KPI Comparison by Case'}},scales:{y:{beginAtZero:false}}}}" alt="KPI Comparison" style="width: 100%; height: 100%; object-fit: contain;">
                                    </div>
                                    <div class="visualization-caption">KPI Comparison by Case</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            
            <!-- Action Footer -->
            <div class="action-footer">
                <div class="footer-info">
                    시뮬레이션이 성공적으로 완료되었습니다.
                </div>
                <div class="footer-actions">
                    <button class="btn btn-secondary" onclick="location.href='simulation-setup.html'">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                        </svg>
                        새 시뮬레이션
                    </button>
                    <button class="btn btn-success" onclick="saveResult()">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"/>
                        </svg>
                        결과 저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== DATA =====
        let simulationResult = null;
        
        // 샘플 KPI 결과 데이터 (시뮬레이션에서 생성된 값)
        const sampleResults = {
            handling: {
                performance: 'Handling',
                kpiLists: [
                    {
                        name: 'Response',
                        items: [
                            { 
                                id: 'kpi_201', 
                                name: 'Steering Wheel Angle', 
                                unit: 'deg', 
                                base: '28.0', 
                                target: '25.2±1.00',
                                cases: [
                                    { value: '28.0', status: 'fail', comment: '' },
                                    { value: '28.1', status: 'fail', comment: '' },
                                    { value: '28.2', status: 'fail', comment: '' }
                                ]
                            },
                            { 
                                id: 'kpi_202', 
                                name: 'Lateral Acceleration Response Time', 
                                unit: 'sec', 
                                base: '0.266', 
                                target: '0.25±0.01',
                                cases: [
                                    { value: '0.255', status: 'pass', comment: '' },
                                    { value: '0.260', status: 'fail', comment: '' },
                                    { value: '0.261', status: 'fail', comment: '' }
                                ]
                            }
                        ]
                    },
                    {
                        name: 'General Handling',
                        items: [
                            { 
                                id: 'kpi_203', 
                                name: 'Roll Angle Peak', 
                                unit: 'deg', 
                                base: '1.80', 
                                target: '1.90±0.08',
                                cases: [
                                    { value: '1.86', status: 'pass', comment: '' },
                                    { value: '1.85', status: 'pass', comment: '' },
                                    { value: '1.82', status: 'pass', comment: '' }
                                ]
                            },
                            { 
                                id: 'kpi_204', 
                                name: 'Roll Angle Steady State', 
                                unit: 'deg', 
                                base: '1.50', 
                                target: '1.70±0.08',
                                cases: [
                                    { value: '1.55', status: 'pass', comment: '' },
                                    { value: '1.55', status: 'pass', comment: '' },
                                    { value: '1.55', status: 'pass', comment: '' }
                                ]
                            },
                            { 
                                id: 'kpi_205', 
                                name: 'Yaw Rate Overshoot', 
                                unit: '%', 
                                base: '28.15', 
                                target: '25.0±1.50',
                                cases: [
                                    { value: '27.54', status: 'fail', comment: '' },
                                    { value: '29.10', status: 'fail', comment: '' },
                                    { value: '28.50', status: 'fail', comment: '' }
                                ]
                            }
                        ]
                    },
                    {
                        name: 'Limit Handling',
                        items: [
                            { 
                                id: 'kpi_206', 
                                name: 'Steady State Sideslip Angle', 
                                unit: 'deg', 
                                base: '0.65', 
                                target: '0.60±0.02',
                                cases: [
                                    { value: '0.59', status: 'pass', comment: '-10.5%' },
                                    { value: '0.61', status: 'pass', comment: '-3.4%' },
                                    { value: '0.596', status: 'pass', comment: '-2.8%' }
                                ]
                            }
                        ]
                    }
                ]
            }
        };
        
        // 샘플 Case 버전 정보
        const sampleCaseVersions = [
            { caseNum: 1, versionName: 'v1.1 - 축 강성 개선안', modifiedParams: [
                { cardName: 'UPR_ARM(FRT/RR)', paramName: '축 Q', defaultValue: '59', newValue: '65' },
                { cardName: 'LWR_ARM, G', paramName: '반경 P1', defaultValue: '312', newValue: '320' }
            ], cards: [
                { cardName: 'UPR_ARM(FRT/RR)', params: [
                    { name: '반경 P1', value: '441', isModified: false },
                    { name: '축 Q', value: '65', isModified: true, defaultValue: '59' },
                    { name: '비틀림 R', value: '22', isModified: false }
                ]},
                { cardName: 'LWR_ARM, G', params: [
                    { name: '반경 P1', value: '320', isModified: true, defaultValue: '312' },
                    { name: '축 Q', value: '68', isModified: false }
                ]}
            ]},
            { caseNum: 2, versionName: 'v2.0 - 경량화 적용', modifiedParams: [
                { cardName: 'UPR_ARM(FRT/RR)', paramName: '비틀림 R', defaultValue: '22', newValue: '18' }
            ], cards: [
                { cardName: 'UPR_ARM(FRT/RR)', params: [
                    { name: '반경 P1', value: '435', isModified: false },
                    { name: '축 Q', value: '70', isModified: false },
                    { name: '비틀림 R', value: '18', isModified: true, defaultValue: '22' }
                ]},
                { cardName: 'LWR_ARM, G', params: [
                    { name: '반경 P1', value: '305', isModified: false },
                    { name: '축 Q', value: '65', isModified: false }
                ]}
            ]},
            { caseNum: 3, versionName: 'v2.1 - 경량화 + 강성 보완', modifiedParams: [], cards: [
                { cardName: 'UPR_ARM(FRT/RR)', params: [
                    { name: '반경 P1', value: '438', isModified: false },
                    { name: '축 Q', value: '72', isModified: false },
                    { name: '비틀림 R', value: '20', isModified: false }
                ]},
                { cardName: 'LWR_ARM, G', params: [
                    { name: '반경 P1', value: '310', isModified: false },
                    { name: '축 Q', value: '66', isModified: false }
                ]}
            ]}
        ];

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadSimulationResult();
            renderResult();
        });

        // 시뮬레이션 결과 로드
        function loadSimulationResult() {
            const stored = localStorage.getItem('simulationResult');
            if (stored) {
                simulationResult = JSON.parse(stored);
            } else {
                // 샘플 데이터 사용 (handling)
                simulationResult = {
                    performanceType: 'handling',
                    performanceName: 'Handling',
                    executedAt: new Date().toISOString()
                };
            }
        }

        // 결과 렌더링
        function renderResult() {
            // 기본값 설정 (handling)
            const performanceType = simulationResult.performanceType || 'handling';
            const results = sampleResults[performanceType] || sampleResults.handling;
            
            // 개요 업데이트
            document.getElementById('performanceName').textContent = results.performance;
            document.getElementById('execTime').textContent = new Date(simulationResult.executedAt || Date.now()).toLocaleString('ko-KR');
            document.getElementById('simType').textContent = 'Simulation Type: ' + results.performance;
            
            // KPI 개수 계산
            let totalKpis = 0;
            results.kpiLists.forEach(kpiList => {
                totalKpis += kpiList.items.length;
            });
            document.getElementById('kpiCount').textContent = totalKpis + '개';
            document.getElementById('caseCount').textContent = '3개';
            
            // KPI 테이블 렌더링
            renderKPITable(results);
        }

        // Case 요약 렌더링 (버전 기반 + 변경된 파라미터 강조)
        function renderCaseSummary() {
            const container = document.getElementById('caseSummaryGrid');
            
            let html = '';
            sampleCaseVersions.forEach(caseData => {
                const hasModifications = caseData.modifiedParams && caseData.modifiedParams.length > 0;
                
                html += `
                    <div class="case-summary-card">
                        <div class="case-summary-title">
                            <span class="case-summary-badge">Case ${caseData.caseNum}</span>
                            ${caseData.versionName}
                            ${hasModifications ? '<span class="modified-badge">수정됨</span>' : ''}
                        </div>
                        <div class="case-change-list">
                `;
                
                caseData.cards.forEach(card => {
                    html += `<div class="case-card-name">${card.cardName}</div>`;
                    html += `<div class="case-params-grid">`;
                    card.params.forEach(param => {
                        if (param.isModified) {
                            html += `
                                <div class="case-param-item modified">
                                    <span class="param-label">${param.name}</span>
                                    <span class="param-value">
                                        <span class="old-value">${param.defaultValue}</span>
                                        <span class="arrow">→</span>
                                        <span class="new-value">${param.value}</span>
                                    </span>
                                </div>
                            `;
                        } else {
                            html += `
                                <div class="case-param-item">
                                    <span class="param-label">${param.name}</span>
                                    <span class="param-value">${param.value}</span>
                                </div>
                            `;
                        }
                    });
                    html += `</div>`;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // KPI 테이블 렌더링 (3단계 계층 구조)
        function renderKPITable(results) {
            const thead = document.getElementById('kpiTableHead');
            const tbody = document.getElementById('kpiTableBody');
            
            // 헤더 생성
            let headerHtml = `
                <tr>
                    <th rowspan="2" style="width: 100px;">Performance</th>
                    <th rowspan="2" style="width: 120px;">KPI List</th>
                    <th rowspan="2">KPI Item</th>
                    <th rowspan="2" style="width: 60px;">Unit</th>
                    <th rowspan="2" style="width: 90px;">Target</th>
                    <th rowspan="2" style="width: 70px;">Base</th>
                    <th colspan="2">Case1</th>
                    <th colspan="2">Case2</th>
                    <th colspan="2">Case3</th>
                </tr>
                <tr>
                    <th style="min-width: 65px;">Value</th>
                    <th style="min-width: 70px;">Δ</th>
                    <th style="min-width: 65px;">Value</th>
                    <th style="min-width: 70px;">Δ</th>
                    <th style="min-width: 65px;">Value</th>
                    <th style="min-width: 70px;">Δ</th>
                </tr>
            `;
            thead.innerHTML = headerHtml;
            
            // 전체 KPI 개수 계산
            let totalKpiCount = 0;
            results.kpiLists.forEach(kpiList => {
                totalKpiCount += kpiList.items.length;
            });
            
            // 바디 생성
            let bodyHtml = '';
            let isFirstPerformance = true;
            
            results.kpiLists.forEach((kpiList, listIndex) => {
                kpiList.items.forEach((kpi, kpiIndex) => {
                    bodyHtml += `<tr>`;
                    
                    // Performance 셀 (첫 행에만)
                    if (isFirstPerformance) {
                        bodyHtml += `<td rowspan="${totalKpiCount}" class="kpi-performance">${results.performance}</td>`;
                        isFirstPerformance = false;
                    }
                    
                    // KPI List (소분류) 셀 (KPI List 첫 행에만)
                    if (kpiIndex === 0) {
                        bodyHtml += `<td rowspan="${kpiList.items.length}" class="kpi-category-cell">${kpiList.name}</td>`;
                    }
                    
                    bodyHtml += `
                        <td class="kpi-name">${kpi.name}</td>
                        <td class="kpi-unit">${kpi.unit}</td>
                        <td class="kpi-target">${kpi.target || '-'}</td>
                        <td class="kpi-base">${kpi.base}</td>
                    `;
                    
                    // Case 결과들
                    kpi.cases.forEach(caseResult => {
                        bodyHtml += `
                            <td class="kpi-value ${caseResult.status}">${caseResult.value}</td>
                            <td class="kpi-comment">${caseResult.comment || ''}</td>
                        `;
                    });
                    
                    bodyHtml += `</tr>`;
                });
            });
            
            tbody.innerHTML = bodyHtml;
        }

        // ===== ACTIONS =====
        function downloadReport() {
            alert('PDF 리포트 다운로드 기능 준비 중입니다.');
        }

        function exportExcel() {
            alert('Excel 내보내기 기능 준비 중입니다.');
        }

        function saveResult() {
            alert('결과가 저장되었습니다.');
        }
    </script>
</body>
</html>
